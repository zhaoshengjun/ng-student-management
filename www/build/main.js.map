{"version":3,"sources":["../../src/share/data-service.ts","../../node_modules/@angular/core/@angular lazy","../../src/pages/student-modal/student-modal.ts","../../src lazy","../../src/pages/setting/setting.ts","../../src/pages/report/report.ts","../../src/pages/lodge/lodge.ts","../../src/pages/lodge-form/lodge-form.ts","../../src/pages/signup/signup.ts","../../src/pages/login/login.ts","../../src/pages/tabs/tabs.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/share/common.ts","../../src/share/data/model.ts","../../src/app/app.component.ts","../../src/pages/loading/loading.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { Student } from \"./data/model\";\nimport {\n  AngularFireDatabase,\n  FirebaseListObservable\n} from \"angularfire2/database\";\nimport { AngularFireAuth } from \"angularfire2/auth\";\nimport { Injectable } from \"@angular/core\";\n\nimport { getDateString } from \"./common\";\n\n@Injectable()\nexport class DataService {\n  students: Student[];\n  lodgelist: any[];\n  uid: string;\n  today: string;\n\n  constructor(\n    private afAuth: AngularFireAuth,\n    private afDB: AngularFireDatabase\n  ) {\n    afAuth.authState.subscribe(user => {\n      this.uid = user.uid;\n    });\n  }\n\n  private convertFirebaseObject(obj: object, key: string) {\n    return Object.assign({ key: key }, obj);\n  }\n\n  // students api\n  checkLoginStatus() {\n    if (!this.uid) {\n      let user = this.afAuth.auth.currentUser;\n      if (user) {\n        this.uid = user.uid;\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return true;\n    }\n  }\n  retriveData() {\n    if (this.checkLoginStatus()) {\n      let today = getDateString();\n      this.afDB\n        .list(`/${this.uid}/students`, { preserveSnapshot: true })\n        .subscribe(snapshot => {\n          console.log(\"Getting students snapshot:\", snapshot);\n          let stuTemp = [];\n          snapshot.forEach(s => {\n            stuTemp.push(this.convertFirebaseObject(s.val(), s.key));\n          });\n          this.students = stuTemp;\n        });\n      this.afDB\n        .list(`/${this.uid}/lodgelists/${today}`, { preserveSnapshot: true })\n        .subscribe(snapshot => {\n          console.log(\"Getting lodgelists\", snapshot);\n          this.lodgelist = snapshot;\n        });\n    }\n  }\n  getStudents() {\n    if (!this.students) {\n      this.retriveData();\n    }\n\n    return new Promise((res, rej) => {\n      if (this.students) {\n        res(this.students);\n      } else {\n        rej(\"No data found\");\n      }\n    });\n  }\n\n  getStudentById(id: string) {\n    return this.students[0];\n    // return this.students.filter( s => s.$key === id);\n  }\n\n  updateStudentInfo(studentId: string, newVal: Student) {\n    // 1. update based on new value;\n    // 2. if holiday period has been updated, needs to check the lodge list as well\n    // return this.students\n    // .update(studentId, newVal)\n  }\n\n  addStudent(student: Student) {\n    // 1. add to students\n    // 2. check if he/she needs to be lodged on today's list.\n    // return this.students.push(student);\n  }\n\n  archiveStudent(studentId: string) {\n    // return this.students.update(studentId, {\n    //   archived: true,\n    //   archivedDate: new Date()\n    // })\n  }\n\n  // lodge list api\n  getList(ref: string): FirebaseListObservable<any> {\n    // if (this.uid) {\n    //   if (!this.lodgelist) {\n    //     // user has signed in and there's no lodgelist\n    //     //  we build a new one\n    //     this.buildLodgeList();\n    //   }\n    // }\n\n    if (this.checkLoginStatus()) {\n      return this.afDB.list(ref, {\n        preserveSnapshot: true\n      });\n    } else {\n      return null;\n    }\n  }\n\n  buildLodgeList() {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/share/data-service.ts","function webpackEmptyAsyncContext(req) {\n\treturn new Promise(function(resolve, reject) { reject(new Error(\"Cannot find module '\" + req + \"'.\")); });\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 185;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/@angular lazy\n// module id = 185\n// module chunks = 0","import { DataService } from './../../share/data-service';\nimport { Student } from './../../share/data/model';\nimport { Component } from \"@angular/core\";\nimport { NavParams, ViewController } from \"ionic-angular\";\n\n@Component({\n  selector: \"page-student-modal\",\n  templateUrl: \"student-modal.html\"\n})\nexport class StudentModalPage {\n  confirmTitle: string = \"confirm\";\n  isArchived: boolean = false;\n  student: Student = new Student;\n  mode: string = \"add\";\n\n  constructor(private viewCtrl: ViewController,\n    private dbService: DataService,\n    private navParams: NavParams) {\n\n\n\n\n    // if student has been archived, the UI should reflect this\n    // e.g. a darker color or a ribbon on the title.\n\n  }\n\n  ionViewDidLoad() {\n    let title = this.navParams.get(\"confirmTitle\");\n    if (title) this.confirmTitle = title;\n\n    let student = this.navParams.get(\"student\");\n    if (student) {\n      this.mode = \"edit\";\n      this.student = student;\n    }\n\n    this.isArchived = this.student.status == 'achived';\n    console.log('student', this.student);\n    console.log('confirm title:', this.confirmTitle);\n  }\n\n  clickedAvatar() {\n    console.log('needs to change avatar');\n    // access the photo lib to change the avatar. \n    // this can be saved to the database.\n  }\n\n  onConfirm() {\n    // should update/add the student data\n    // delete/archive will be performed in the list view instead of this detail view\n    // for unarchived student, there's archive option\n    // for archived student, there's unarchive option\n    if (this.mode = \"add\") {\n      this.dbService.addStudent(this.student);\n    } else {\n      // this.dbService.updateStudentInfo(this.student.$key, newVal)\n    }\n  }\n\n  onCancel() {\n    this.viewCtrl.dismiss();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/student-modal/student-modal.ts","function webpackEmptyAsyncContext(req) {\n\treturn new Promise(function(resolve, reject) { reject(new Error(\"Cannot find module '\" + req + \"'.\")); });\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 265;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 265\n// module chunks = 0","import { AngularFireAuth } from 'angularfire2/auth';\nimport { AngularFireDatabase } from 'angularfire2/database';\nimport { StudentModalPage } from \"./../student-modal/student-modal\";\nimport { Component } from \"@angular/core\";\nimport { NavController, ModalController } from \"ionic-angular\";\nimport { Subject } from \"rxjs/Subject\";\n\n@Component({\n  selector: \"page-setting\",\n  templateUrl: \"setting.html\"\n})\nexport class SettingPage {\n  userId: string;\n  students;\n  activeOnly: Subject<any>;\n\n\n  constructor(\n    public navCtrl: NavController,\n    private afDB: AngularFireDatabase,\n    private afAuth: AngularFireAuth,\n    public modalCtrl: ModalController\n  ) {\n    this.activeOnly = new Subject();\n    this.userId = this.afAuth.auth.currentUser.uid;\n    const studentsRefString = `/${this.userId}/students`\n    this.students = this.afDB.list(studentsRefString);\n  }\n\n  ionViewDidLoad() {\n    // load all students info\n\n  }\n\n  updateFilter() {\n    this.activeOnly.next()\n  }\n\n  onEdit(student) {\n    console.log('Edit student info: ', student);\n    let modal = this.modalCtrl.create(StudentModalPage, { confirmTitle: \"Update\", student });\n    modal.present();\n  }\n\n  onAdd() {\n    // show add modal\n    let modal = this.modalCtrl.create(StudentModalPage, {});\n    modal.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/setting/setting.ts","import { Component } from \"@angular/core\";\nimport { NavController } from \"ionic-angular\";\n\n@Component({\n  selector: \"page-report\",\n  templateUrl: \"report.html\"\n})\nexport class ReportPage {\n  constructor(public navCtrl: NavController) {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/report/report.ts","import { Student } from \"./../../share/data/model\";\nimport { AngularFireAuth } from \"angularfire2/auth\";\n// import { Student } from \"./../../share\";\n// import { LoginPage } from \"./../login/login\";\nimport { Component } from \"@angular/core\";\nimport {\n  NavController,\n  App,\n  LoadingController,\n  ModalController,\n  AlertController,\n  Events\n} from \"ionic-angular\";\nimport { LoadingPage } from \"../loading/loading\";\nimport {\n  FirebaseListObservable,\n  AngularFireDatabase,\n  FirebaseObjectObservable\n} from \"angularfire2/database\";\n\nimport \"rxjs/add/operator/map\";\nimport { ReplaySubject } from \"rxjs/ReplaySubject\";\nimport * as firebase from \"firebase\";\n// import { Observable } from \"rxjs/Observable\";\nimport * as Rx from \"rxjs\";\nimport { DataService } from \"../../share/data-service\";\nimport { getDateString, convertFirebaseObject } from \"../../share/common\";\nimport { isWithinRange, format } from \"date-fns\";\nimport { LodgeFormPage } from \"../lodge-form/lodge-form\";\n\n@Component({\n  selector: \"page-lodge\",\n  templateUrl: \"lodge.html\"\n})\nexport class LodgePage {\n  selectedSegment = \"unlodged\";\n  wholeList: Rx.Observable<any>;\n  userId: string;\n  selectedDate: Date;\n  dateString: string;\n  site: FirebaseObjectObservable<any>;\n  db: firebase.database.Database;\n  private loader: LoadingPage;\n\n  constructor(\n    public navCtrl: NavController,\n    public loadingCtrl: LoadingController,\n    private modalCtrl: ModalController,\n    private alertCtrl: AlertController,\n    private afDB: AngularFireDatabase,\n    private afAuth: AngularFireAuth,\n    private dbService: DataService,\n    private events: Events,\n    private _app: App\n  ) {\n    this.db = this.afDB.database;\n  }\n\n  ionViewDidLoad() {\n    this.loader = new LoadingPage(this.loadingCtrl);\n    this.selectedDate = new Date();\n    this.dateString = format(this.selectedDate, \"YYYYMMDD\");\n    this.userId = this.dbService.uid;\n    const todayRef = `/${this.userId}/lodgelists/${this.dateString}`;\n    let listRef = this.afDB.list(todayRef);\n    let fetchStudentInfo = (stu, cb) => {\n      let stuRef = this.db\n        .ref()\n        .child(`/${this.userId}/students/${stu.studentId}`);\n      stuRef.once(\"value\", cb);\n    };\n    this.wholeList = listRef.map(snap => {\n      if (snap.length == 0) {\n        // this is the 1st time to use for today.\n        // should generate a list\n        this.generateList();\n      } else {\n        // list already exists.\n        let list = [];\n        snap.forEach(stu => {\n          // console.log('stu:', stu);\n          fetchStudentInfo(stu, data => {\n            // console.log(\"fetch:\", data.val());\n            let stud = data.val();\n            let student = Object.assign(stud, {\n              lodgeStatus: stu.lodgeStatus,\n              reason: stu.reason\n            });\n            // console.log('generate info: ', student);\n            list.push(student);\n          });\n        });\n        return list;\n      }\n    });\n    this.site = this.afDB.object(`/${this.userId}/site`);\n    this.wholeList.subscribe(d => {\n      console.log(\"whole list\", d);\n      if (d.length > 0) {\n        let unlodgeList = d.filter(a => a.lodgeStatus === 'unlodged');\n        this.events.publish(\"unlodge:count\", unlodgeList.length);\n      }\n    });\n  }\n\n  generateList() {\n    // get full students list\n\n    let studentRefString = `/${this.userId}/students`;\n    let studentRef = this.db.ref(studentRefString);\n    // let studentsRef = this.afDB.list(studentRefString);\n    // check each of them should be lodged\n    let lodgeListRefString = `/${this.userId}/lodgelists/${this.dateString}`;\n    let lodgeListRef = this.db.ref(lodgeListRefString);\n    // let lodgeListRef = this.afDB.list(lodgeListRefString);\n    let listRef = this.afDB.database.ref(lodgeListRefString);\n    studentRef.once(\"value\", snap => {\n      console.log(snap.val());\n      let students = snap.val();\n      let lodgeList = [];\n      students.filter(s => s.status === \"active\").forEach(s => {\n        console.log(\"student:\", s, \"key:\", s.id);\n        let { reason, status } = this.checkIfNeedToLodge(s);\n        let lodgeInfo = {\n          studentId: s.id,\n          lodgeStatus: status,\n          reason: reason\n        };\n        console.log(\"lodgeInfo:\", lodgeInfo);\n        lodgeList.push(lodgeInfo);\n      });\n      listRef.update(lodgeList);\n    });\n  }\n\n  checkIfNeedToLodge(student) {\n    let reason = \"\";\n    let status = \"unlodged\";\n\n    let holidays = student.holidayPeriods;\n    if (holidays && holidays.length > 0) {\n      for (let i = 0; i < holidays.length; i++) {\n        let holiday = holidays[i];\n        if (\n          isWithinRange(this.selectedDate, holiday.startDate, holiday.endDate)\n        ) {\n          reason = \"InHoliday\";\n          status = \"lodged\";\n          break;\n        }\n      }\n    }\n\n    return { reason, status };\n  }\n\n  onLogout() {\n    const root = this._app.getRootNavs()[0];\n    root.popToRoot();\n  }\n\n  onSegmentChanged(newVal: string) {\n    this.selectedSegment = newVal;\n    console.log(this.selectedSegment);\n  }\n\n  onSignIn(student, index) {\n    console.log(\"Sign in with :\", student);\n    // should show sign in form to collect signature\n    //  and save it to the database\n    let studentRef = `/${this.userId}/lodgelists/${this.dateString}`;\n    let signInForm = this.modalCtrl.create(LodgeFormPage, {\n      student,\n      studentRef,\n      index\n    });\n    signInForm.present();\n  }\n  onText(student) {\n    console.log(\"Text with :\", student);\n    //  Text student\n    if (student.phone && student.guardianPhone) {\n      // if have more than 1 phone numbers in student record,\n      //  show a popup window to choose.\n      let alert = this.alertCtrl.create();\n      alert.setTitle(\"Select phone number\");\n      alert.addInput({\n        type: \"radio\",\n        label: student.phone,\n        value: student.phone,\n        checked: true\n      });\n      alert.addInput({\n        type: \"radio\",\n        label: student.guardianPhone,\n        value: student.guardianPhone,\n        checked: false\n      });\n      alert.addButton(\"Cancel\");\n      alert.addButton({\n        text: \"Ok\",\n        handler: (data: any) => {\n          console.log(\"Radio data:\", data);\n          // data is the selected phone no.\n          // make a call\n        }\n      });\n      alert.present();\n    } else {\n      let phone = student.phone || student.guardianPhone;\n      // make a call\n    }\n  }\n  onCall(student) {\n    console.log(\"Call with :\", student);\n    //  Call student\n    // if have more than 1 phone numbers in student record,\n    //  show a popup window to choose.\n  }\n  onEmail(student) {\n    console.log(\"Email with :\", student);\n    //  Email student\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/lodge/lodge.ts","import { LoadingPage } from \"./../loading/loading\";\nimport { Student } from \"./../../share/data/model\";\nimport { Component } from \"@angular/core\";\nimport {\n  NavController,\n  ViewController,\n  NavParams,\n  LoadingController\n} from \"ionic-angular\";\n\nimport firebase from \"firebase\";\n\n@Component({\n  selector: \"page-lodge-form\",\n  templateUrl: \"lodge-form.html\"\n})\nexport class LodgeFormPage {\n  student: Student;\n  studentRef: string;\n  index: number;\n  error: boolean = false;\n  errorMessage: string = \"\";\n  loader: LoadingPage;\n  private db: firebase.database.Database;\n\n  constructor(\n    public navCtrl: NavController,\n    private viewCtrl: ViewController,\n    private loadingCtrl: LoadingController,\n    public navParams: NavParams\n  ) {\n    this.student = this.navParams.get(\"student\");\n    this.studentRef = this.navParams.get(\"studentRef\");\n    this.index = this.navParams.get(\"index\");\n    this.db = firebase.database();\n  }\n\n  ionViewDidLoad() {\n    console.log(\"ionViewDidLoad LodgeFormPage\");\n    this.loader = new LoadingPage(this.loadingCtrl);\n  }\n\n  onSubmit() {\n    // submit the record\n    this.loader.show();\n    console.log(\"submit signin information\");\n\n    console.log(\"index\", this.index);\n    // should show progress bar\n    // also show error/success message to let user know.\n    let listRef = this.db.ref(this.studentRef);\n    listRef\n      .child(this.index.toString())\n      .update({ lodgeStatus: \"lodged\", reason: \"signature\" })\n      .then(\n        _ => {\n          this.loader.hide();\n          this.viewCtrl.dismiss();\n        },\n        err => {\n          this.loader.hide();\n          this.error = true;\n          this.errorMessage = err.message;\n        }\n      );\n    // let stuRef = listRef.orderByChild(\"studentId\").equalTo(this.student.id);\n    // let stuRef = listRef.\n    // console.log(stuRef);\n    // stuRef.ref\n    //   .update({ lodgeStatus: \"lodged\", reason: \"signature\" })\n    //   .then(_ => {\n    //     this.viewCtrl.dismiss();\n    //   });\n    // stuRef.once('value', data => {\n    //   console.log(data);\n    //   console.log(data.val());\n\n    // });\n    // listRef.once(\"value\", data => {\n    //   let students = data.val();\n    //   students.filter(s => s.studentId = this.student.id)\n\n    // })\n  }\n\n  onCancel() {\n    console.log(\"Cancel signin\");\n    this.viewCtrl.dismiss();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/lodge-form/lodge-form.ts","import { User } from \"./../../share/data/model\";\nimport { Component } from \"@angular/core\";\nimport { NavController, NavParams } from \"ionic-angular\";\nimport { AngularFireAuth } from \"angularfire2/auth\";\n\n@Component({\n  selector: \"page-signup\",\n  templateUrl: \"signup.html\"\n})\nexport class SignupPage {\n  user: User = {\n    email: \"\",\n    password: \"\",\n    site: \"\"\n  };\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private af: AngularFireAuth\n  ) {}\n\n  onSubmit(user: User) {\n    // validate first\n    // though user info has been posted to firebase, no user data can be accessed yet.\n    this.af.auth\n      .createUserWithEmailAndPassword(this.user.email, this.user.password)\n      .then(\n        data => {\n          // should disable user before manuall verificiation has been confirmed.\n          console.log(data);\n          //the page doesn't auto refresh, so we can show the message.\n        },\n        err => {\n          // show error message\n          console.log(err);\n        }\n      )\n      .catch(err => {});\n  }\n\n  onCancel() {\n    this.navCtrl.pop();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts","import { TabsPage } from \"./../tabs/tabs\";\nimport { SignupPage } from \"./../signup/signup\";\nimport { Component } from \"@angular/core\";\nimport { NavController, NavParams, LoadingController } from \"ionic-angular\";\nimport { AngularFireAuth } from \"angularfire2/auth\";\nimport { LoadingPage } from \"../loading/loading\";\nimport { User } from \"../../share/data/model\";\n\n@Component({\n  selector: \"page-login\",\n  templateUrl: \"login.html\"\n})\nexport class LoginPage {\n  user: User = {\n    email: \"a@a.com\",\n    password: \"111111\",\n    site: \"\"\n  };\n  constructor(public navCtrl: NavController, public loadingCtrl: LoadingController, public navParams: NavParams, private afAuth: AngularFireAuth) { }\n\n  ionViewDidLoad() {\n\n  }\n\n  onLogin() {\n\n    let loader = new LoadingPage(this.loadingCtrl)\n    loader.show();\n    this.afAuth.auth.signInWithEmailAndPassword(this.user.email, this.user.password)\n      .then((res) => {\n        loader.hide();\n        console.log(res);\n        this.navCtrl.push(TabsPage);\n      }, (err) => {\n        loader.hide();\n        console.log(err)\n        // show error message\n      })\n  }\n\n  onSignup() {\n    this.navCtrl.push(SignupPage);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","import { ReportPage } from \"./../report/report\";\nimport { SettingPage } from \"./../setting/setting\";\nimport { Component } from \"@angular/core\";\nimport { LodgePage } from \"../lodge/lodge\";\nimport { Events } from \"ionic-angular\";\n\n@Component({\n  templateUrl: \"tabs.html\"\n})\nexport class TabsPage {\n  tab1Root = LodgePage;\n  tab2Root = ReportPage;\n  tab3Root = SettingPage;\n\n  unlodgeCount: number = 0;\n  constructor(public events: Events) {\n    events.subscribe(\"unlodge:count\", (data) => {\n      this.unlodgeCount = data;\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tabs/tabs.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { StudentModalPage } from \"./../pages/student-modal/student-modal\";\nimport { SettingPage } from \"./../pages/setting/setting\";\nimport { ReportPage } from \"./../pages/report/report\";\nimport { LodgePage } from \"./../pages/lodge/lodge\";\nimport { SignupPage } from \"./../pages/signup/signup\";\nimport { LoginPage } from \"./../pages/login/login\";\nimport { NgModule, ErrorHandler } from \"@angular/core\";\nimport { BrowserModule } from \"@angular/platform-browser\";\nimport { IonicApp, IonicModule, IonicErrorHandler } from \"ionic-angular\";\nimport { MyApp } from \"./app.component\";\nimport { TabsPage } from \"../pages/tabs/tabs\";\nimport { LoadingPage } from \"./../pages/loading/loading\";\nimport { HttpModule } from '@angular/http';\n\nimport { StatusBar } from \"@ionic-native/status-bar\";\nimport { SplashScreen } from \"@ionic-native/splash-screen\";\n\nimport { AngularFireModule } from \"angularfire2\";\nimport { AngularFireDatabaseModule } from \"angularfire2/database\";\nimport { AngularFireAuthModule } from \"angularfire2/auth\";\nimport { DataService } from \"../share/data-service\";\nimport { LodgeFormPage } from \"../pages/lodge-form/lodge-form\";\n\n\nexport const firebaseConfig = {\n  apiKey: \"AIzaSyCETsqdUtSsWkz4oCP8_EsM3mbeDlfscKQ\",\n  authDomain: \"unilodge-6fd12.firebaseapp.com\",\n  databaseURL: \"https://unilodge-6fd12.firebaseio.com\",\n  projectId: \"unilodge-6fd12\",\n  storageBucket: \"unilodge-6fd12.appspot.com\",\n  messagingSenderId: \"550368336024\"\n};\n\n@NgModule({\n  declarations: [\n    MyApp,\n    LoginPage,\n    SignupPage,\n    LodgePage,\n    ReportPage,\n    SettingPage,\n    StudentModalPage,\n    LoadingPage,\n    LodgeFormPage,\n    TabsPage\n  ],\n  imports: [\n    BrowserModule,\n    HttpModule,\n    IonicModule.forRoot(MyApp, {\n      iconMode: \"md\",\n      pageTransition: \"md-transition\"\n    }),\n    AngularFireModule.initializeApp(firebaseConfig),\n    AngularFireDatabaseModule,\n    AngularFireAuthModule\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    LoginPage,\n    SignupPage,\n    LodgePage,\n    ReportPage,\n    SettingPage,\n    StudentModalPage,\n    LoadingPage,\n    LodgeFormPage,\n    TabsPage\n  ],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    { provide: ErrorHandler, useClass: IonicErrorHandler },\n    DataService\n  ]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","export function getDateString(d: Date = new Date()) {\r\n  let day = d.getDate() - 1;\r\n  let month = d.getMonth() + 1;\r\n  let dayStr = day < 10 ? \"0\" + day.toString() : day.toString();\r\n  let monthStr = month < 10 ? \"0\" + month.toString() : month.toString();\r\n  return `${d.getFullYear()}${monthStr}${dayStr}`;\r\n}\r\n\r\nexport function convertFirebaseObject(obj: object, key: string) {\r\n  return Object.assign({ key: key }, obj);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/share/common.ts","export interface User {\n  email: string;\n  password: string;\n  site: string;\n}\n\nexport interface Period {\n  startDate: Date;\n  endDate: Date;\n}\n\nexport interface Guardian {\n  name: string;\n  photo: string;\n  email: string;\n}\n\nexport class Student {\n  id: string = \"\";\n  name: string = \"Full name\";\n  roomNo: string = \"\";\n  photo: string = \"101\";\n  university: string = \"UQ\";\n  phone: string = \"123-456-7890\";\n  email: string = \"abc@email.com\";\n  startDate: Date = new Date();\n  endDate: Date = new Date();\n  dateOfBirth: Date = new Date();\n  holidayPeriods: Period[] = [];\n  comments: string = \"\";\n  guardianName: string = \"Guardian name\";\n  guardianPhone: string = \"123-456-7890\";\n  guardianEmail: string = \"abc@email.com\";\n  status: string = \"active\";\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/share/data/model.ts","import { Component } from \"@angular/core\";\nimport { Platform } from \"ionic-angular\";\nimport { StatusBar } from \"@ionic-native/status-bar\";\nimport { SplashScreen } from \"@ionic-native/splash-screen\";\nimport { LoginPage } from \"../pages/login/login\";\n\n@Component({\n  templateUrl: \"app.html\"\n})\nexport class MyApp {\n  rootPage: any = LoginPage;\n\n  constructor(\n    platform: Platform,\n    statusBar: StatusBar,\n    splashScreen: SplashScreen\n  ) {\n    platform.ready().then(() => {\n      statusBar.styleDefault();\n      splashScreen.hide();\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { Component } from '@angular/core';\nimport { LoadingController, Loading } from \"ionic-angular\";\n\n@Component({\n  selector: 'page-loading',\n  templateUrl: 'loading.html',\n})\nexport class LoadingPage {\n\n  private loading: Loading;\n  constructor(public loadingCtrl: LoadingController) {\n  }\n\n  show() {\n    this.loading = this.loadingCtrl.create({\n      spinner: \"crescent\",\n      content: \"Please wait...\"\n    });\n    this.loading.present();\n  }\n\n  hide() {\n    if (this.loading) {\n      this.loading.dismiss();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/loading/loading.ts"],"sourceRoot":""}